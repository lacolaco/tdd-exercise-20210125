## TODO

**テスト容易性高 重要度高**

- [x] 製品を作成できる

  - [x] 種類「ワードプロセッサ」の製品「MS Word」18,800 円を作成できる
  - [x] 種類「スプレッドシート」の製品「MS Excel」27,800 円を作成できる
  - [x] 種類「データベース」の製品「MS SQL Server」919,000 円を作成できる

- [x] 製品を購入する契約を作成できる

  - [x] 契約は契約日を持ち、1 つの製品を 1 つだけ購入できる
    - [x] 任意の製品を 2021/01/25 に購入する契約を作成できる

- [ ] 契約から売上（製品の価格）と収益認識を計算できる

  - [x] 契約の売上は製品の価格の総和である
  - [x] 契約からいつにいくら収益認識されるかがわかる
    - [x] 契約は1つ以上の収益認識を持つ
    - [x] 収益認識は認識日と金額を持つ
  - [ ] 収益認識の総和は売上と完全一致する
  - [ ] 収益認識は製品の種類に応じて計算される
    - [ ] ワードプロセッサは契約日（signed_on または signedDate）に直ちに売上（revenue）全額を収益認識（revenue recognition）する
    - [ ] スプレッドシートは契約日に売上の 2/3、30 日後に 1/3 を収益認識する
        - 翌月ではないことを境界値テストする
    - [ ] データベースは契約日に売上の 1/3、60 日後に 1/3、120 日後にまた 1/3 を収益認識する
        - 翌月ではないことを境界値テストする

<!-- 限定条件 -->

- [ ] 製品の種類にはワードプロセッサ/スプレッドシート/データベースの 3 つの種類がある

**テスト容易性低 重要度低**

## request

いま、**以下の 3 つの種類（category）のソフトウェア製品（product）**を扱っている。

- ワードプロセッサ
- スプレッドシート
- データベース

**製品は名前（name）と価格（price）を持つ**（今回は消費税を扱わないので、単純に価格と考えてください）。

例:

- ワードプロセッサ「MS Word」の価格は 18,800 円
- ワードプロセッサ「一太郎」の価格は 20,000 円
- スプレッドシート「MS Excel」の価格は 27,800 円
- スプレッドシート「三四郎」の価格は 5,000 円
- データベース「MS SQL Server」の価格は 919,000 円
- データベース「Oracle Database」の価格は 2,100,000 円

現時点では**1 回にどれか 1 つの製品を 1 つのみ購入する契約（contract）ができる**ものとする。契約が成立（sign）した場合、

- **ワードプロセッサは契約日（signed_on または signedDate）に直ちに売上（revenue）全額を収益認識（revenue recognition）する**
- **スプレッドシートは契約日に売上の 2/3、30 日後に 1/3 を収益認識する**
- **データベースは契約日に売上の 1/3、60 日後に 1/3、120 日後にまた 1/3 を収益認識する**

なお、収益認識の総和は売上とかならず **完全一致** しなければならない。

- 本日「MS Word」が 1 つ売れる契約が成立したとき、いつにいくら収益認識されるだろうか
- 本日「MS Excel」が 1 つ売れる契約が成立したとき、いつにいくら収益認識されるだろうか
- 本日「MS SQL Server」が 1 つ売れる契約が成立したとき、いつにいくら収益認識されるだろうか
  （他の 3 製品に関してもテストしてください）
